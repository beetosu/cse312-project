# Open Source Report: websockets

## Sources
* [Documentation](https://websockets.readthedocs.io/en/stable/)
* [Source Code](https://github.com/aaugustin/websockets/)

## What it does
This library provides a simple, usable framework for building a websocket server. Using this library will allow us to isolate and simplify the websocket work required for the project, and handling edge cases without the need for extensive debugging.

## How it does what it does

### Serving the Websocket Server:
* an instance of [serve](https://github.com/aaugustin/websockets/blob/13eff12/src/websockets/legacy/server.py#L826-L1048) is created by `websockets.serve(callbackFunction, ipAddress, port)`.
* Serve creates a WebSocketServer, which creates, holds, and destroys WebSocketServerProtocols.
* Serve also creates a WebSocketServerProtocol, which recieves, processes, and sends out data to the server

### Creating a Connection:
* The protocol waits for a valid handshake request, which is determined by reading the raw bytes and attempting to convert into a HTTP request using the `read_http_request` function.
* The proper HTTP handshake response is validated and processed by `handshake`, which after reading the HTTP request builds the response using `build_response` and writes it back to the client through `write_http_response`.

### Sending Frames:
* WebSocketServerProtocol recieves incoming bytes through its `recv` coroutine, which it inherits from WebSocketCommonProtocol.
* What the callback function instantiated through serve does can vary, but to send a socket, the `send` coroutine is called.
* To send a frame to several clients, the `broadcast` is used, which takes a list of WebSocketServerProtocols, and the message to broadcast.

### Relevant files
* [server.py](https://github.com/aaugustin/websockets/blob/13eff12/src/websockets/legacy/server.py#L826-L1048)
* [protocol.py](https://github.com/aaugustin/websockets/blob/13eff12/src/websockets/legacy/protocol.py#L564-L722)

## License
The repo for websockets is the [BSD 3-Clause "New" or "Revised" License](https://github.com/aaugustin/websockets/blob/main/LICENSE). According to the summary generated by GitHub, this allows for private/personal use, alongside modification and distribution, but does not hold the creators liable for damages the code my produce. Our project repo will also have to reprovide the websockets license.