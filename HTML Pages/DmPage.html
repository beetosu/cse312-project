<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>DM Page</title>
    <link rel="stylesheet" href="DmPage.css">
    <script>

        const socket = new WebSocket('ws://' + {{socketName}} + '/websocket');

        document.addEventListener("keypress", function (event) {
            if (event.code === "Enter") {
                console.log("Sending the message")
                sendMessage();
            }
        });
        function sendMessage() {
            //TODO Beep boop send message        
            const chatBox = document.getElementById("chat-comment");
            const comment = chatBox.value;
            chatBox.value = "";
            chatBox.focus();

            if(comment !== "") {
                //Output on the socket to the dm pag

                //Get logged in user
                socket.send(JSON.stringify({'sender' : {{sender}} ,'comment': comment}));

                //Send data to mysql database
            }
        }
    </script>
    </head>
<body>
    <div class="container-title" style="color: white; text-align: center">Text Channel</div>

<div class="container">
    <!--Set up templating here for messages-->
    {{message}}

</div>

<!-- Change form to input box --> 
<div class="chat-box">
    <label for="chat-comment" >Comment: </label>
    <input id="chat-comment" type="text" name="comment"  >
</div>

</body>
</html>